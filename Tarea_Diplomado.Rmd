---
Title: Analisis exploratorio Desembarque artesanal por recurso y especie
Author: Jorge Carrasco
Date: "20-05-2023"
output:
  html_document:
    df_print: paged
---

```{r librerias, include = FALSE}
library(readr)
library(ggplot2)
library(dplyr)
library(tidyr)
knitr::opts_chunk$set(echo = TRUE)
```

```{=html}
<style>
h1 {
  text-align: center;
  font-weight: bold;
  text-decoration: underline;
}
</style>
```
# [**Tarea Diplomado**]{.underline}

#### Autor: Jorge Carrasco

#### Profesores: José Gallardo - María Angelica Rueda

### [**Descripción del problema**]{.underline}

```{=html}
<style>
h5 {
  text-align: justify;
}
</style>
```
##### Analizar la base de datos de origen publico, La cual especifica la cantidad de kilos de distintas especies de recursos extraibles del mar, la idea es poder lograr pronosticar en una serie de tiempo la cantidad de kilos maximos a extrar por mes de cada recurso, con el fin de poder planificar de mejor manera la logistica y el area comercial para el negocio.

##### [**Estos datos provienen del siguiente URL:**]{.underline}

[Link de la base de datos](https://datos.gob.cl/dataset/desembarque-artesanal-2019-preliminar "URL")

```{r cargar, echo=TRUE}
dataset <- read_csv("Desembarque por caleta y recurso.csv")

```

#### [Realizamos la primera exploración de datos:]{.underline}


```{r resumen, echo=TRUE}
head(dataset)
```


#### Usamos la función gather, para unificar los meses y los kilos en una sola columna, ademas eliminamos la columna Total.(creamos un nuevo dataset)

```{r gather}
dataset2 <- gather(data = dataset, key = "Meses", value = "Kilos", 6:17)
dataset2 <- select(dataset2, -TOTAL) #Eliminamos el total
head(dataset2)
```

#### A nuestra nueva base de datos realizamos un resumen.

```{r resumen2, echo=TRUE}
summary(dataset2)
```
#### Evidenciamos NA en los valores de la variable Kilos, los cuales necesitamos reemplazar por 0.

```{r reemplazo los NA, echo=TRUE}
dataset3 <- dataset2 %>% 
  mutate(Kilos = ifelse(is.na(Kilos), 0, Kilos))
summary(dataset3)
```

#### Otro proceso necesario es convertir nuestra variable "Kilos" a numerica

```{r resumen3, echo=TRUE}
dataset3$Kilos <- as.numeric(dataset3$Kilos)
class(dataset3$Kilos)
```

#### En la base de datos tambien tenemos otros valores atipicos por ejemplo: en la variable Region tenemos la Region 99, la cual no especifica "Provincia", "Caleta" ni "Comuna",  Eliminamos las filas con la region 99 que no especificaban datos y creamos nuestro ultimo DF.

```{r Eliminar99, echo=TRUE}
subset_dataset <- dataset3 %>%
  filter(Region != 99)
summary(subset_dataset)
```
#### Ahora nuestros datos estan bien categorizados.


#### Describimos la variación de las variables de estudio usando histogramas

```{r histograma, include = TRUE}
ggplot(subset_dataset, aes(x = Kilos)) +
  geom_histogram(fill = "steelblue", color = "white") +
  labs(title = "Histograma de Kilos",
       x = "Kilos",
       y = "Frecuencia")
```


```{r barras, include = TRUE}
ggplot(subset_dataset, aes(x = Region)) +
  geom_bar() +
  labs(title = "Distribución de desembarco por región") +
  xlab("Regiones") +
  ylab("Frecuencia") +
  theme(axis.text.x = element_text(angle = 90, hjust = 1, size = 8))
```
